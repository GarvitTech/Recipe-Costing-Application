<Page x:Class="RecipeCostingApp.Views.CostingAnalysisPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Costing Analysis">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Content="Costing Analysis &amp; Reports" Style="{StaticResource SectionHeader}" FontSize="24"/>

        <Border Grid.Row="1" Background="{StaticResource SurfaceBrush}" BorderBrush="{StaticResource BorderBrush}" 
                BorderThickness="1" CornerRadius="5" Padding="20" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal">
                <Label Content="Select Recipe:" Style="{StaticResource FieldLabel}"/>
                <ComboBox Name="CmbRecipes" Width="300" Style="{StaticResource InputComboBox}" 
                         DisplayMemberPath="Name" SelectionChanged="CmbRecipes_SelectionChanged"/>
                <Button Name="BtnGeneratePdf" Content="ðŸ“„ Generate PDF" Style="{StaticResource PrimaryButton}" 
                       Margin="20,0,0,0" Click="BtnGeneratePdf_Click"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="2" Background="{StaticResource SurfaceBrush}" BorderBrush="{StaticResource BorderBrush}" 
                BorderThickness="1" CornerRadius="5">
            <Grid Margin="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <Label Content="Recipe Details" Style="{StaticResource SectionHeader}"/>
                    <DataGrid Name="DgCostingIngredients" Style="{StaticResource ModernDataGrid}" Height="300">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ingredient" Binding="{Binding Ingredient.Name}" Width="200"/>
                            <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" Width="80"/>
                            <DataGridTextColumn Header="Unit" Binding="{Binding Ingredient.Unit}" Width="60"/>
                            <DataGridTextColumn Header="Unit Cost" Binding="{Binding Ingredient.UnitCost, StringFormat=C4}" Width="80"/>
                            <DataGridTextColumn Header="Total Cost" Binding="{Binding TotalCost, StringFormat=C2}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="20,0,0,0">
                    <Label Content="Cost Breakdown" Style="{StaticResource SectionHeader}"/>
                    <Border Background="{StaticResource CalculatedBrush}" Padding="15" CornerRadius="5">
                        <StackPanel>
                            <TextBlock Name="TxtRecipeCostDisplay" Text="Recipe Cost: $0.00" FontSize="14" Margin="0,5"/>
                            <TextBlock Name="TxtWasteDisplay" Text="Waste Adjustment: $0.00" FontSize="14" Margin="0,5"/>
                            <TextBlock Name="TxtGstDisplay" Text="GST: $0.00" FontSize="14" Margin="0,5"/>
                            <TextBlock Name="TxtPackagingDisplay" Text="Packaging: $0.00" FontSize="14" Margin="0,5"/>
                            <TextBlock Name="TxtDeliveryDisplay" Text="Delivery: $0.00" FontSize="14" Margin="0,5"/>
                            <Separator Margin="0,10"/>
                            <TextBlock Name="TxtFinalCostDisplay" Text="Final Cost: $0.00" FontWeight="Bold" FontSize="16" Margin="0,5"/>
                            <TextBlock Name="TxtSellingPriceDisplay" Text="Selling Price: $0.00" FontWeight="Bold" FontSize="16" Margin="0,5"/>
                            <TextBlock Name="TxtProfitDisplay" Text="Profit: $0.00" FontWeight="Bold" FontSize="16" Margin="0,5"/>
                            <TextBlock Name="TxtMarginDisplay" Text="Margin: 0%" FontWeight="Bold" FontSize="16" Margin="0,5"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
